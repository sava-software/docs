---
title: "Programs"
description: "Native Solana Program Utilities and Clients."
---

<Card title="GitHub Repository" icon="github" horizontal={true} href="https://github.com/sava-software/solana-programs" />

## [Dependencies](https://github.com/sava-software/solana-programs/blob/main/src/main/java/module-info.java)
  - [systems.comodal.json_iterator](https://github.com/comodal/json-iterator?tab=readme-ov-file#json-iterator)
  - java.net.http
  - software.sava.core
  - software.sava.rpc

## Durable Nonce Transactions

<Info>
  See the [official Solana documentation](https://solana.com/developers/courses/offline-transactions/durable-nonces) for context on durable nonce transactions.
</Info>

### Create & Initialize Nonce Account

```java
Signer signer = ...
 
var rpcEndpoint = SolanaNetwork.MAIN_NET.getEndpoint();
try (var httpClient = HttpClient.newHttpClient()) {
  var rpcClient = SolanaRpcClient.createClient(rpcEndpoint, httpClient);

  var blockHashFuture = rpcClient.getLatestBlockHash();
  var minRentFuture = rpcClient.getMinimumBalanceForRentExemption(NonceAccount.BYTES);

  var solanaAccounts = SolanaAccounts.MAIN_NET;
  var nonceAccountWithSeed = PublicKey.createOffCurveAccountWithAsciiSeed(
      signer.publicKey(),
      "nonce",
      solanaAccounts.systemProgram()
  );

  var initializeNonceAccountIx = SystemProgram.initializeNonceAccount(
      solanaAccounts,
      nonceAccountWithSeed.publicKey(),
      signer.publicKey()
  );
  
  System.out.format("""
          Fetching block hash and minimum rent to create nonce account %s with authority %s.
          
          """,
      nonceAccountWithSeed.publicKey(),
      signer.publicKey()
  );

  long minRent = minRentFuture.join();
  var createNonceAccountIx = SystemProgram.createAccountWithSeed(
      solanaAccounts.invokedSystemProgram(),
      signer.publicKey(),
      nonceAccountWithSeed,
      minRent,
      NonceAccount.BYTES,
      solanaAccounts.systemProgram()
  );

  var instructions = List.of(createNonceAccountIx, initializeNonceAccountIx);
  var transaction = Transaction.createTx(signer.publicKey(), instructions);

  var blockHash = blockHashFuture.join().blockHash();
  transaction.setRecentBlockHash(blockHash);
  transaction.sign(signer);

  var base64Encoded = transaction.base64EncodeToString();
  var sendTransactionFuture = rpcClient.sendTransaction(base64Encoded);
  System.out.format("""
          Creating nonce account %s
          https://explorer.solana.com/tx/%s
          
          """,
      nonceAccountWithSeed.publicKey(),
      transaction.getBase58Id()
  );

  var sig = sendTransactionFuture.join();
  System.out.format("""
          Confirmed transaction %s
          https://solscan.io/account/%s
          
          """,
      sig,
      nonceAccountWithSeed.publicKey()
  );

  var nonceAccountInfo = rpcClient.getAccountInfo(nonceAccountWithSeed.publicKey()).join();
  var nonceAccount = NonceAccount.read(nonceAccountInfo);
  System.out.println(nonceAccount);
}
```

### Create & Send Durable Nonce Transaction

```java
var signer = ...
var nonceAccountKey = PublicKey.fromBase58Encoded("");
var sendToKey = PublicKey.fromBase58Encoded("");
var transferSOL = new BigDecimal("0.0");

var solanaAccounts = SolanaAccounts.MAIN_NET;
var rpcEndpoint = SolanaNetwork.MAIN_NET.getEndpoint();
try (var httpClient = HttpClient.newHttpClient()) {
  var rpcClient = SolanaRpcClient.createClient(rpcEndpoint, httpClient);

  var nonceAccountInfo = rpcClient.getAccountInfo(nonceAccountKey).join();
  var nonceAccount = NonceAccount.read(nonceAccountInfo);
  System.out.println(nonceAccount);

  var advanceNonceIx = nonceAccount.advanceNonceAccount(solanaAccounts);
  var transferIx = SystemProgram.transfer(
      solanaAccounts.invokedSystemProgram(),
      signer.publicKey(),
      sendToKey,
      LamportDecimal.fromBigDecimal(transferSOL).longValue()
  );

  var instructions = List.of(advanceNonceIx, transferIx);
  var transaction = Transaction.createTx(signer.publicKey(), instructions);
  transaction.setRecentBlockHash(nonceAccount.nonce());
  transaction.sign(signer);

  var base64Encoded = transaction.base64EncodeToString();
  var sendTransactionFuture = rpcClient.sendTransaction(base64Encoded);
  System.out.format("""
          Transferring %s SOL from %s to %s.
          https://explorer.solana.com/tx/%s
          
          """,
      transferSOL.toPlainString(), signer.publicKey(), sendToKey,
      transaction.getBase58Id()
  );

  var sig = sendTransactionFuture.join();
  System.out.println("Confirmed transaction " + sig);
}
```
